plugins {
    id 'java'
    id 'war'
}

group 'com.thx.priv'

repositories {
    mavenCentral()
}

dependencies {
    runtime 'com.h2database:h2:2.1.212'
    runtime 'com.google.zxing:core:3.4.0'
    runtime 'com.google.zxing:javase:3.4.0'
    implementation 'javax.xml.bind:jaxb-api:2.3.1'
    implementation 'javax.servlet:javax.servlet-api:3.1.0'
    implementation 'com.github.jsimone:webapp-runner:9.0.27.1'
}

task stage(dependsOn: ['build', 'clean'])
build.mustRunAfter clean

task copyToLib(type: Copy) {
    into "$buildDir/server"
    from(configurations.runtimeClasspath) {
        include "webapp-runner*"
    }
}

stage.dependsOn(copyToLib)